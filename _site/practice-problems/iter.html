<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>Iterables</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Tammy's 61A resources.">
<link href="/cs61a-resources/css/bootstrap.min.css" rel="stylesheet">
<link href="/cs61a-resources/css/hc.css" rel="stylesheet">
<link href="/cs61a-resources/css/slidin.css" rel="stylesheet">
<link href="/cs61a-resources/css/pygments/tango.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif] d-->

  </head>
  <body>
    <div class="nav-toggle"><i class="fa fa-bars fa-2x"></i> Herring Cove </div>
    <div id = "wrapper">
      <div class="navbar navbar-default" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <p class="navbar-brand">CS 61A Resources</p>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="cat3-toggle"><h5 class="toggle">Discussion Material</h5></li>
        <div class="cat3">
          
        </div>

        <li class="cat1-toggle"><h5 class="toggle">Guides</h5></li>
        <div class="cat1">
          
            <li> 
              <a href="/guides/tail-recursion.html"> Tail Recursion </a>
            </li>
          
            <li> 
              <a href="/guides/scheme.html"> Scheme </a>
            </li>
          
            <li> 
              <a href="/guides/recursion.html"> Recursion </a>
            </li>
          
            <li> 
              <a href="/guides/oop.html"> Object Oriented Programming </a>
            </li>
          
            <li> 
              <a href="/guides/env-diag.html"> Environment Diagrams </a>
            </li>
          
        </div>

        <li class="cat2-toggle"><h5 class="toggle">Practice Problems</h5></li>
        <div class="cat2">
          
            <li> 
              <a href="/practice-problems/scheme.html"> Scheme </a>
            </li>
          
            <li> 
              <a href="/practice-problems/mt2.html"> Midterm 2 </a>
            </li>
          
            <li> 
              <a href="/practice-problems/mt1.html"> Midterm 1 </a>
            </li>
          
            <li> 
              <a href="/practice-problems/iter.html"> Iterables </a>
            </li>
          
            <li> 
              <a href="/practice-problems/final.html"> Final </a>
            </li>
          
        </div>

        <li class="cat4-toggle"><h5 class="toggle">Other</h5></li>
        <div class="cat4">
          
            <li> 
              <a href="/cs61a-resources/other/trees.html"> Summer 2016 Trees Guest Lecture </a>
            </li>
          
            <li> 
              <a href="/cs61a-resources/other/sp16-mt1.html"> Spring 2016 MT1 Walkthrough </a>
            </li>
          
            <li> 
              <a href="/cs61a-resources/other/mt1-review.html"> Midterm 1 Review Slides </a>
            </li>
          
            <li> 
              <a href="/cs61a-resources/other/exams.html"> Course Advice </a>
            </li>
          
        </div>
        <li><a href="/cs61a-resources/about.html"><h5 class="toggle">About</h5></a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>

<!-- Sidebar -->
<div id="sidebar-wrapper">
  <ul class="sidebar-nav">
    <li class="sidebar-brand"><a href="/cs61a-resources/"><h1 class="brand">CS 61A</h1></a></li>
    <!-- todo: find a better way to hide on posts -->
    
    <hr />
        <li class="cat3-toggle"><h4 class="toggle">Discussion Material</h4></li>
    <div class="cat3">
      
    </div>
    <li class="cat1-toggle"><h4 class="toggle">Guides</h4></li>
    <div class="cat1">
      
        <li> 
          <a href="/cs61a-resources/guides/tail-recursion.html"> Tail Recursion </a>
        </li>
      
        <li> 
          <a href="/cs61a-resources/guides/scheme.html"> Scheme </a>
        </li>
      
        <li> 
          <a href="/cs61a-resources/guides/recursion.html"> Recursion </a>
        </li>
      
        <li> 
          <a href="/cs61a-resources/guides/oop.html"> Object Oriented Programming </a>
        </li>
      
        <li> 
          <a href="/cs61a-resources/guides/env-diag.html"> Environment Diagrams </a>
        </li>
      
    </div>
    <li class="cat2-toggle"><h4 class="toggle">Practice Problems</h4></li>
    <div class="cat2">
      
        <li> 
          <a href="/cs61a-resources/practice-problems/scheme.html"> Scheme </a>
        </li>
      
        <li> 
          <a href="/cs61a-resources/practice-problems/mt2.html"> Midterm 2 </a>
        </li>
      
        <li> 
          <a href="/cs61a-resources/practice-problems/mt1.html"> Midterm 1 </a>
        </li>
      
        <li> 
          <a href="/cs61a-resources/practice-problems/iter.html"> Iterables </a>
        </li>
      
        <li> 
          <a href="/cs61a-resources/practice-problems/final.html"> Final </a>
        </li>
      
    </div>

    <li class="cat4-toggle"><h4 class="toggle">Other</h4></li>
    <div class="cat4">
      
        <li> 
          <a href="/cs61a-resources/other/trees.html"> Summer 2016 Trees Guest Lecture </a>
        </li>
      
        <li> 
          <a href="/cs61a-resources/other/sp16-mt1.html"> Spring 2016 MT1 Walkthrough </a>
        </li>
      
        <li> 
          <a href="/cs61a-resources/other/mt1-review.html"> Midterm 1 Review Slides </a>
        </li>
      
        <li> 
          <a href="/cs61a-resources/other/exams.html"> Course Advice </a>
        </li>
      
    </div>
    <li><a href="/cs61a-resources/about.html"><h4>About</h4></a></li>
    <hr />
  </ul>
</div>

      <div class="container">
        <div id="article">
  <div class="article-title">Iterables</div>
  <hr/>
  <div class="post">
    <h2 id="concepts">Concepts</h2>
<ol style="width: 75%">
<li> What method(s) must <b>iterables</b> have?   </li>
<blockquote class="solution-4"><code>__iter__</code></blockquote>
<li>What method(s) must <b>iterators</b> have?  </li>
<blockquote class="solution-4"><code>__iter__</code> AND <code>__next__</code></blockquote>
<li>What data type does <code>__iter__</code> return? </li>
<blockquote class="solution-4">iterator</blockquote>
<li>What data type does <code>__next__</code> return?</li>
<blockquote class="solution-4">whatever type each element of the sequence is</blockquote>
<li>Is a <b>generator</b> an iterable or an iterator?  </li>
<blockquote class="solution-4">iterator</blockquote>
<li>What keyword in the body of a function makes that function return a generator object?  </li>
<blockquote class="solution-4"><code>yield</code></blockquote>
<li>How is <code>yield</code> different from <code>return</code>?    </li>
<blockquote class="solution-4"><code>yield</code> does not close the frame. <code>yield</code> outputs a value, and keeps the frame open until <code>StopIteration</code> is raised.</blockquote>
<li>When you call <code>next</code> on a generator, the body starts executing at what line? At what line will it stop? At what line will it start the next time you call <code>next</code>?  </li>
<blockquote class="solution-4">execution starts at the first line of the body and stops after the line with <code>yield</code> is executed. when <code>next</code> is called again, execution picks up at the line right after the <code>yield</code> statement (where it last left off) and stops after another <code>yield</code> execution <i>or</i> if there are no more lines in the body.</blockquote>
<li>What happens when you call <code>list</code> on an iterable or an iterator? What happens if you call it a second time on the same objects?  </li>
<blockquote class="solution-4">when you call <code>list</code> on an iterable or an iterator, Python calls <code>iter</code> on it and then attempts to construct a list with the <code>next</code> element until <code>StopIteration</code> is reached, then returns the constructed list.</blockquote>
<li>Can you iterate through an iterable in a for loop? Can you iterate through an iterator in a for loop?  </li>
<blockquote class="solution-4">you can use both iterables and iterators in a for loop.</blockquote> 
</ol>

<p><a class="solution-toggle-4 btn btn-default">TOGGLE SOLUTION</a></p>

<p><a class="anchor" name="wwpp"></a></p>

<h2 id="what-would-python-print">What would Python print?</h2>

<p>The following classes define an iterable representing the sequence of multiples for any given number and the iterator that returns the next value in the sequence. The sequence goes up to 1000.</p>

<figure class="highlight"><pre><code class="language-py3" data-lang="py3"><span class="k">class</span> <span class="nc">Multiples</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">num</span>
    
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MultiplesIterator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MultiplesIterator</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">num</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curr</span> <span class="o">=</span> <span class="n">num</span>
    
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    
    <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">curr</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span>
        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curr</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span>
        <span class="k">return</span> <span class="n">val</span></code></pre></figure>

<p>What will the following lines output?</p>

<pre><code>&gt;&gt;&gt; hundreds = Multiples(100)<br />&gt;&gt;&gt; next(hundreds)
<span class="solution-3">TypeError: 'Multiples' object is not an iterator</span>
&gt;&gt;&gt; next(iter(hundreds))
<span class="solution-3">100</span>
&gt;&gt;&gt; next(iter(hundreds))
<span class="solution-3">100</span>
&gt;&gt;&gt; i = iter(hundreds)
&gt;&gt;&gt; i is iter(hundreds)
<span class="solution-3">False</span>
&gt;&gt;&gt; i is iter(i)
<span class="solution-3">True</span>
&gt;&gt;&gt; next(i)
<span class="solution-3">100</span>
&gt;&gt;&gt; next(i)
<span class="solution-3">200</span>
&gt;&gt;&gt; list(hundreds)
<span class="solution-3">[100, 200, 300, 400, 500, 600, 700, 800, 900]</span>
&gt;&gt;&gt; list(i)
<span class="solution-3">[300, 400, 500, 600, 700, 800, 900]</span>
&gt;&gt;&gt; list(hundreds)
<span class="solution-3">[100, 200, 300, 400, 500, 600, 700, 800, 900]</span>
&gt;&gt;&gt; list(i)
<span class="solution-3">[]</span>
&gt;&gt;&gt; for i in hundreds:
...     print(i)
<span class="solution-3">5<br />25<br />125<br />625</span>
&gt;&gt;&gt; for x in i:
...     print(x)</code></pre>

<p class="solution-6"><b>Explanation</b>: <code>Multiples</code>'s <code>__iter__</code> method always returns a *new instance* of <code>MultiplesIterator</code>, whereas <code>MultiplesIterator</code>'s <code>__iter__</code> simply returns itself. For iterables, calling <code>iter</code> will reset the iterator, but since iterators just return themselves, they do not reset.</p>

<p><a class="solution-toggle-3 btn btn-default">TOGGLE SOLUTION</a> Â 
<a class="solution-toggle-6 btn btn-default">TOGGLE EXPLANATION</a></p>

<p><a class="anchor" name="code"></a></p>

<h2 id="writing-code">Writing code</h2>
<p>Fill in the following definition of a generator function which yields every number from <code>1</code> to <code>n</code> and prints <code>'m was a factor'</code> if the previous number, <code>m</code>, was a factor of <code>n</code>. See the doctests for an example.</p>

<figure class="highlight"><pre><code class="language-py3" data-lang="py3"><span class="k">def</span> <span class="nf">print_factor</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &gt;&gt;&gt; gen = print_factor(8)</span>
<span class="sd">    &gt;&gt;&gt; next(gen)</span>
<span class="sd">    1</span>
<span class="sd">    &gt;&gt;&gt; next(gen)</span>
<span class="sd">    1 was a factor</span>
<span class="sd">    2</span>
<span class="sd">    &gt;&gt;&gt; next(gen)</span>
<span class="sd">    2 was a factor</span>
<span class="sd">    3</span>
<span class="sd">    &gt;&gt;&gt; next(gen)</span>
<span class="sd">    4</span>
<span class="sd">    &gt;&gt;&gt; next(gen)</span>
<span class="sd">    4 was a factor</span>
<span class="sd">    5</span>
<span class="sd">    &quot;&quot;&quot;</span>  
    <span class="s">&quot;*** YOUR CODE HERE ***&quot;</span></code></pre></figure>

<p><a class="solution-toggle-2-p btn btn-default">TOGGLE SOLUTION</a></p>

<div class="solution-2-p">

<figure class="highlight"><pre><code class="language-py3" data-lang="py3"><span class="k">def</span> <span class="nf">print_factor</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">curr</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">curr</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">curr</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">curr</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">curr</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; was a factor&quot;</span><span class="p">)</span>
        <span class="n">curr</span> <span class="o">+=</span> <span class="mi">1</span></code></pre></figure>
</div>

  </div>
</div>

      <div class="container">
  <footer>
    <p class="text-muted credit">
      &copy; 2016 <a href="http://tmmydngyn.com/">Tammy Nguyen</a> &middot;
      <a href="https://github.com/arnp/herring-cove"> Herring Cove for Jekyll </a>
    </p>
  </footer>
</div>

      </div>
    </div>
    <!-- Bootstrap core JavaScript-->
<script src="/cs61a-resources/js/jquery-1.10.2.min.js"></script>
<script src="/cs61a-resources/js/bootstrap.min.js"></script>
<script src="/cs61a-resources/js/hc.js"></script>
<script src="/cs61a-resources/js/slidin.js"></script>

  </body>
</html>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-70344118-2', 'auto');
  ga('send', 'pageview');

</script>